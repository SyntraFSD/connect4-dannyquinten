{"version":3,"sources":["../../src/js/login.js"],"names":["goToLogin","document","querySelector","goToRegister","loginForm","loginAlert","registerForm","apiDomain","switchForm","event","preventDefault","classList","toggle","hideLoginAlert","add","showLoginAlert","content","success","remove","textContent","getFormData","form","inputFields","querySelectorAll","formData","forEach","inputField","name","value","handleLoginRequest","request","target","console","log","readyState","response","JSON","parse","responseText","status","access_token","window","localStorage","setItem","location","d","error","login","XMLHttpRequest","addEventListener","open","setRequestHeader","send","stringify","handleRegisterRequest","register"],"mappings":"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","sourcesContent":["const goToLogin = document.querySelector('#goToLogin');\nconst goToRegister = document.querySelector('#goToRegister');\nconst loginForm = document.querySelector('.Login');\nconst loginAlert = document.querySelector('.Login-alert');\nconst registerForm = document.querySelector('.Register');\nconst apiDomain = 'http://connect4.pienter.space';\n\nfunction switchForm(event) {\n  event.preventDefault();\n  loginForm.classList.toggle('hide');\n  registerForm.classList.toggle('hide');\n}\n\nfunction hideLoginAlert() {\n  loginAlert.classList.add('hide');\n}\n\nfunction showLoginAlert(content, success = false) {\n  if (success) {\n    loginAlert.classList.add('success');\n  } else {\n    loginAlert.classList.remove('success');\n  }\n  loginAlert.textContent = content;\n  loginAlert.classList.remove('hide');\n}\n\nfunction getFormData(form) {\n  const inputFields = form.querySelectorAll('input');\n  const formData = {};\n  inputFields.forEach((inputField) => {\n    formData[inputField.name] = inputField.value;\n  });\n  return formData;\n}\n\nfunction handleLoginRequest(event) {\n  const request = event.target;\n  console.log(request);\n  if (request.readyState === 4) {\n    const response = JSON.parse(request.responseText);\n    // console.log(JSON.parse(request.responseText));\n    console.log(request.status);\n    if (request.status >= 200 && request.status < 300) {\n      showLoginAlert('Joepie je bent ingelogd', true);\n      /*\n      1 - Check de response\n      2 - Sla de token op in localStorage\n      3 - Redirect naar closed.html\n       */\n      if (response.access_token) {\n        window.localStorage.setItem('token', response.access_token);\n        // window.history.pushState({}, 'Closed', 'closed.html');\n        window.location = 'closed.html';d\n      }\n    } else if (request.status === 401) {\n      showLoginAlert(response.error);\n    }\n  }\n}\n\nfunction login(event) {\n  event.preventDefault();\n  const formData = getFormData(loginForm);\n  const request = new XMLHttpRequest();\n  request.addEventListener('readystatechange', handleLoginRequest);\n  request.open('POST', apiDomain + '/api/auth/login');\n  request.setRequestHeader('Content-Type', 'application/json');\n  request.send(JSON.stringify(formData));\n}\n\nfunction handleRegisterRequest(event) {\n  const request = event.target;\n  console.log(request);\n  if (request.readyState === 4) {\n    console.log(request.status);\n    if (request.status >= 200 && request.status < 300) {\n      console.log('success');\n      console.log(request);\n    } else {\n      console.log('error');\n      console.log(request);\n    }\n  }\n}\n\nfunction register(event) {\n  event.preventDefault();\n  const formData = getFormData(registerForm);\n  const request = new XMLHttpRequest();\n  request.addEventListener('readystatechange', handleRegisterRequest);\n  request.open('POST', apiDomain + '/api/auth/register');\n  request.setRequestHeader('Content-Type', 'application/json');\n  request.send(JSON.stringify(formData));\n}\n\ngoToRegister.addEventListener('click', switchForm);\ngoToLogin.addEventListener('click', switchForm);\nloginForm.addEventListener('submit', login);\nregisterForm.addEventListener('submit', register);\nloginForm.addEventListener('input', hideLoginAlert);\n"],"file":"login.js"}